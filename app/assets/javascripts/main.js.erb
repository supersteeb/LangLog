jQuery(document).on('page:change turbolinks:load', function() {

	$('#log_in_checkbox.ui.checkbox').checkbox({
		onChecked: function() {
			new Noty({
				layout: 'topRight',
				theme: 'mint',
				type: 'info',
				text: "remember user",
				closeWith: ['button'],
				timeout: 1000
			}).show();
		}
	});

	$('.ui.radio.checkbox').checkbox();

	$('.create_test_link').click(function() {
		$('#select_test_type').modal('show');
	});

	$submission = {};
	$('.ui.checkbox').checkbox({
		onChecked: function() {
			$submission[$(this).attr('name')] = {question: $('label.' + $(this).attr('name')).text().split('.')[1], answered: $(this).data('option')};
		}
	}); 
	// appends to submission object key (question name) value (user option) pais
	$('#submit_test_btn').click(function(e) {
		$.each($('.question-block'), function(index, item){
			question_state = $(item).find('.checkbox').checkbox('is checked').reduce(function(pv, cv) { return pv + cv; }, 0)
			if (question_state == 1) {
				// Do nothing if user selected answer
			} else {
				$submission[$(item).find('.checkbox').attr('id')] = {question: $($('label')[0]).text().split('.')[1], answered: 'Not answered'};
			}
		})
		$('#user_submission').val(JSON.stringify($submission));
		$('#test_questions').submit();
	})
	// $('input').val(); <= assigns value for input, 
	// #user_submission is the id of the input and JSON.stringify - converts to string
	// $('#id')
	// #test_questions is the id of the form
	$('.ui.accordion').accordion();
})
